<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Adressverwaltung</title>

<!-- Bootstrap -->
<link href="../css/bootstrap.min.css" rel="stylesheet">
<!-- Stylesheet -->
<link href="../css/adressverwaltung.css" rel="stylesheet">
<link href="../css/globalStyles.css" rel="stylesheet">
<link href="../css/loadingspinner.css" rel="stylesheet">
<link rel='shortcut icon' type='image/x-icon' href='../images/favicon.ico' >
</head>
<body>
	<header id="pageheader"> </header>

	<div class="container-fluid">
		<div class="row" id="top"></div>

		<div class="row" id="header">
			<div class="col-md-12">
				<h2>Adressverwaltung</h2>

				<!-- Tabs -->
				<ul class="nav nav-tabs">
					<li role="presentation" class="helpHotspot" data-helptext="Personen verwalten">
						<a href="adressverwaltung_personen.html">Personen</a></li>
					<li role="presentation" class="active helpHotspot" data-helptext="Organisationen verwalten">
						<a href="adressverwaltung_organisationen.html">Organisationen</a></li>
					<li role="presentation" class="helpHotspot" data-helptext="Kategorien verwalten">
						<a href="adressverwaltung_kategorienverwaltung.html">Kategorienverwaltung</a></li>
				</ul>

			</div>
		</div>

		<div class="row" id="body">
			<div class="col-md-12">
				
				<div class="tab-content">
					<div class="tab-pane active" id="tab2">

					<div class="row">
						<div class="col-md-12">
							<form role="form" class="form-inline">
								<div class="row">
									<div class="form-group col-md-10">
										<button type="button" id="btn_new" class="btn btn-primary helpHotspot"
											data-toggle="modal"	data-target="#new" data-helptext="Eine neue Organisation im System anlegen.">
											<span class="glyphicon glyphicon-plus"></span> Neu anlegen
										</button>
		
										<div class="input-group suchfilter">
											<span class="input-group-addon"><span
												class="glyphicon glyphicon-search"></span> Filter</span> <input
												id="filter" type="text" class="form-control"
												placeholder="Filterbegriff eingeben...">
										</div>
		
										<div class="input-group helpHotspot" data-helptext="Mit den Typfiltern k&ouml;nnen die Organisationen gefiltert werden. 
												Es werden alle Organisationen angezeigt, die einen der angew&auml;hlten Typen haben. Organisationen denen kein Typ zugeordnet ist, werden permanent angezeigt.">
											<span class="typfilter"><strong>Typfilter:</strong></span>
											<label> <input type="checkbox" id="lieferanten_cbx" value=""> Lieferanten</label>
											<label> <input type="checkbox" id="kunden_cbx" value="">Kunden</label>
											<label> <input type="checkbox" id="sponsoren_cbx" value=""> Sponsoren</label>
											<label> <input type="checkbox" id="keinTyp_cbx" value=""> kein Typ</label>
										</div>
									</div>
								
									<div class="form-group col-md-2 pull-right" style="height: 44px;">
										<label id="lbl_organisation_count" class="pull-right helpHotspot" style="margin-top: 10.5px; margin-bottom: 10.5px;"
											data-helptext="Anzahl der Organisationen, die aktuell angezeigt werden.">Organisationen</label>
									</div>
								</div>
							</form>
						</div>
					</div>
						
						
						<!-- Table -->
						<div class="table-responsive helpHotspot" data-helptext="In dieser Tabelle werden alle Organisationen angezeigt, die sich im System befinden.">
							<table class="table table-hover table-striped header-fixed" id="TableHead">
								<thead class="TableHead">
									<tr>
										<th style="width: 3%" class="hidden">Organisations-ID</th>
										<th style="width: 15%">Name</th>
										<th style="width: 15%">Ansprechperson</th>
										<th style="width: 20%">Anschrift</th>
										<th style="width: 7%">Typ</th>
										<th style="width: 15%">Kategorien</th>
										<th style="width: 25%">Bemerkung</th>
									</tr>
								</thead>
								<tbody id="organisationTableBody" class="searchable">

									<!-- Organisations are placed here by Script "fillOrganisationTable" -->

								</tbody>
							</table>
						</div>
						<!-- Table end -->

						<!-- Neu anlegen und bearbeiten -->
						<div class="modal fade" id="new" tabindex="-1"
							role="dialog" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content modalContentOrganisation">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal">
											<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
										</button>
										<h4 class="modal-title" id="modal_title_text">Neue
											Organisation</h4>
									</div>

									<div class="modal-body">
										<form class="form-horizontal" role="form">											
											<div class="row">
												<div class="col-md-6">
													<input type="hidden" name="tbx_id" id="tbx_id">
													<div class="form-group">
														<label class="col-sm-4 control-label">Name</label>
														<div class="col-sm-8">
															<input type="text" class="form-control" id="tbx_name"
																placeholder="Name" maxlength="100">
														</div>
													</div>
												</div>
												<div class="col-md-6">
													<div class="form-group">
														<label class="col-sm-4 control-label">Adresse</label>
														<div class="col-sm-8">
															<input type="text" class="form-control" id="tbx_address"
																placeholder="Adresse" maxlength="100">
														</div>
													</div>
												</div>
											</div>
											
											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label class="col-sm-4 control-label">PLZ</label>
														<div class="col-sm-8">
															<input type="text" class="form-control" id="tbx_zip"
																placeholder="PLZ" maxlength="5">
														</div>
													</div>
												</div>
												<div class="col-md-6">
													<div class="form-group">
														<label class="col-sm-4 control-label">Ort</label>
														<div class="col-sm-8">
															<input type="text" class="form-control" id="tbx_city"
																placeholder="Ort" maxlength="100">
														</div>
													</div>
												</div>
											</div>
											
											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label class="col-sm-4 control-label">Land</label>
														<div class="col-sm-8">
															<input type="text" class="form-control" id="tbx_country"
																placeholder="Land" maxlength="50">
														</div>
													</div>
												</div>
												<div class="col-md-6">
													
												</div>
											</div>
											
											<div class="row divider-horizontal">
											</div>									

											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label class="col-sm-5 control-label">Ansprechperson</label>
														<div class="col-sm-7">
															<div class="input-group suchfilter_modal">
																<span
																	class="input-group-addon glyphicon glyphicon-search"></span>
																<input id="filter_modal1" type="text"
																	class="form-control" placeholder="Suche...">
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-6">
													<div class="form-group">
														<div class="col-sm-12">
															<div class="form-control searchable ModalDivContainer helpHotspot" id="contactPersonDiv"
																data-helptext="Hier können die Ansprechpersonen zu der jeweiligen Organisation ausgewählt werden.
																	Damit eine Person als Ansprechperson ausgewählt werden kann, muss sie zuerst im System angelegt werden.">
															
																	<!-- contact persons -->
																
															</div>
														</div>
													</div>
												</div>
											</div>

											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label class="col-sm-5 control-label">Kategorien</label>
														<div class="col-sm-7">
															<div class="input-group suchfilter_modal">
																<span
																	class="input-group-addon glyphicon glyphicon-search"></span>
																<input id="filter_modal2" type="text"
																	class="form-control" placeholder="Suche...">
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-6">
													<div class="form-group">
														<div class="col-sm-12">
															<div class="form-control searchable ModalDivContainer helpHotspot" id="categoryDiv"
																data-helptext="Hier können die Kategorien zu der jeweiligen Organisation ausgewählt werden.
																	Damit eine Kategorie zugewiesen werden kann, muss sie zuerst im System angelegt werden.">
																
																<!-- categories -->
																
															</div>
														</div>
													</div>
												</div>
											</div>
											
											<div class="row divider-horizontal">
											</div>

											<div class="row">
												<div class="col-sm-12">
													<div class="form-group">
														<label class="col-sm-2 control-label">Bemerkung</label>
														<div class="col-sm-10">
															<textarea class="form-control" rows="2" id="tbx_comment"
																placeholder="Bemerkung" maxlength="1000" style="resize: none"></textarea>
														</div>
													</div>
												</div>
											</div>
											
											<div class="row divider-horizontal">
											</div>
											
											<div class="row">
												<div class="col-md-12">
													<div class="form-group helpHotspot"
														data-helptext="Hier können der Organisation Typen zugeordnet werden. Die Typzuweisung ist nicht zwingend erforderlich.">
													<label class="col-sm-2 control-label">Typ(en)</label>
													<div class="col-sm-10">
														
															<label class="checkbox-inline">
															  <input type="checkbox" id="cbx_lieferant" value="option1"> Lieferant
															</label>
															<label class="checkbox-inline">
															  <input type="checkbox" id="cbx_kunde" value="option2"> Kunde
															</label>
															<label class="checkbox-inline">
															  <input type="checkbox" id="cbx_sponsor" value="option3"> Sponsor
															</label>
														</div>
													</div>
												</div>
											</div>

										</form>
									</div>

									<div class="modal-footer">
										<div id="newAlertForm"></div>
										<button type="button" class="btn btn-default"
											data-dismiss="modal">Abbrechen</button>
										<button type="button" id="btn_saveorganisation" class="btn btn-primary">
											<span class="glyphicon glyphicon-floppy-save"></span>
											Speichern
										</button>
									</div>
								</div>
								<!-- /.modal-content -->
							</div>
							<!-- /.modal-dialog -->
						</div>
						<!-- /.modal -->

						<!-- Modal Loeschen -->
						<div class="modal fade" id="deleteModal" tabindex="-1"
							role="dialog" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal">
											<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
										</button>
										<h4 class="modal-title">Wollen Sie den Eintrag wirklich
											l&ouml;schen?</h4>
									</div>
									<div class="modal-body">

										<div class="row">
											<div class="col-md-12">
												<label id="label_name_delete">Name</label> 
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<label id="label_address_delete">Adresse</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<label id="label_types_delete">Typen</label>
											</div>
										</div>

									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default"
											data-dismiss="modal">Abbrechen</button>
										<button type="button" id="btn_deleteOrganisation" class="btn btn-danger">
											<span class="glyphicon glyphicon-trash"></span> L&ouml;schen
										</button>

									</div>
								</div>
								<!-- /.modal-content -->
							</div>
							<!-- /.modal-dialog -->
						</div>
						<!-- /.modal -->
						
						<!-- Modal Details -->
						<div class="modal fade" id="details" tabindex="-1"
							role="dialog" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal">
											<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
										</button>
										<h4 class="modal-title">Details</h4>
									</div>
									<div class="modal-body">

										<div class="row">
											<div class="col-md-6">
												<label>Name</label>
											</div>
											<div class="col-md-6">
												<label id="label_name_details">Name</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label>Adresse</label>
											</div>
											<div class="col-md-6">
												<label id="label_address_details">Adresse</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label>Postleitzahl</label>
											</div>
											<div class="col-md-6">
												<label id="label_zip_details">Postleitzahl</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label>Stadt</label>
											</div>
											<div class="col-md-6">
												<label id="label_city_details">Stadt</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label>Land</label>
											</div>
											<div class="col-md-6">
												<label id="label_country_details">Land</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label>Bemerkung</label>
											</div>
											<div class="col-md-6">
												<label id="label_comment_details">Bemerkung</label>
											</div>
										</div>
										
										<div class="row divider-horizontal">
										</div>
										
										<div class="row">
											<div class="col-md-6">
												<label>Typ(en)</label>
											</div>
											<div class="col-md-6">
												<label id="label_types_details">Typ(en)</label>
											</div>
										</div>
										<div id="type_container_details"></div>
										
										<div class="row divider-horizontal">
										</div>
										
										<div class="row">
											<div class="col-md-6">
												<label>Kategorie(n)</label>
											</div>
											<div class="col-md-6">
												<label id="label_categories_details">Kategorie(n)</label>
											</div>
										</div>
										<div id="category_container_details"></div>
										
										<div class="row divider-horizontal">
										</div>
										
										<div class="row">
											<div class="col-md-6">
												<label>Ansprechperson(en)</label>
											</div>
											<div class="col-md-6">
												<label id="label_personIds_details"></label>
											</div>
										</div>
								
										<div class="row divider-horizontal">
										</div>
								
										<div id="person_container_details">
<!-- 											JavaScript -->
										</div>
										
										<div class="row">
											<div class="col-md-6">
												<label>Letzter Bearbeiter</label>
											</div>
											<div class="col-md-6">
												<label id="label_lastEditor_details">Letzter Bearbeiter</label>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<label>Aktualisierungsdatum</label>
											</div>
											<div class="col-md-6">
												<label id="label_updateTimestamp_details">Aktualisierungsdatum</label>
											</div>
										</div>

									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary"
											data-dismiss="modal">OK</button>
									</div>
								</div>
								<!-- /.modal-content -->
							</div>
							<!-- /.modal-dialog -->
						</div>
						<!-- /.modal -->

					</div>
				</div>
<!-- 				/.tab-content -->
				
			</div>
		</div>

		<div class="row" id="footer">
			<div class="col-md-4">
				<button type="button" id="btn_details" class="btn btn-default pull-left centered helpHotspot"
					data-helptext="Detaillierte Informationen zu der gewählten Organisation anzeigen.">
							<span class="glyphicon glyphicon-list"></span> Details
				</button>
			</div>
			<div class="col-md-4">
				<form role="form" class="form-inline col-sm-offset-2">
					<div class="form-group bottom">
						<button type="button" id="btn_edit" class="btn btn-warning" style="margin: auto;">
							<span class="glyphicon glyphicon-pencil"></span> Bearbeiten
						</button>
						<button type="button" id="btn_deleteModal" class="btn btn-danger" style="margin: auto;">
							<span class="glyphicon glyphicon-trash"></span> L&ouml;schen
						</button>
					</div>
				</form>
			</div>
			<div class="col-md-4">
			
				<form role="form" class="form-inline">
					<div class="form-group bottom pull-right">
					
						<button type="button" id="btn_exportCurrentView" class="btn btn-primary">
							<span class="glyphicon glyphicon-share"></span> Auswahl exportieren
						</button>
				
						<a href="../rest/secure/organisation/getAllOrganisationsAsCSV">
							<button type="button" id="btn_export" class="btn btn-primary helpHotspot"
								data-helptext="Eine Liste aller Organisationen als CSV-Datei exportieren." data-toggle="modal" data-target="#exportModal">
								<span class="glyphicon glyphicon-share"></span> Alle exportieren
							</button>
						</a>
					
					</div>
				
				</form>
			
			</div>
		</div>
	</div>

	<!-- 	div for showing loading activity -->
	<div class="spinner-container">
		<div class="spinner">
			<div class="circle"></div>
		</div>
	</div>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="../js/jquery-1.11.1.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="../js/bootstrap.min.js"></script>
	<!-- Load javascript File -->
	<script src="../js/header.js" type="text/javascript"></script>
	<!-- include global scripts here -->
	<script src="../js/jquery.cookie.js" type="text/javascript"></script>
	<script src="../js/globalFunctions.js" type="text/javascript"></script>
	<script src="../js/hilfe.js" type="text/javascript"></script>
	<script src="../js/adressverwaltung_organisationen.js" type="text/javascript"></script>
	<!-- Scripts for CSV-Export -->
	<!-- https://github.com/b4stien/js-csv-encoding -->
	<script type="text/javascript" src="../js/encoding-indexes.js"></script>
    <script type="text/javascript" src="../js/encoding.js"></script>
    <script type="text/javascript" src="../js/fileSaver.js"></script>
</body>
</html>
